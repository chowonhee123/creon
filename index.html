<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contents Builder</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="index.css" />
    <script
      src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs"
      type="module"
    ></script>
    <script type="importmap">
      {
        "imports": {
          "@google/genai": "https://esm.run/@google/genai"
        }
      }
    </script>
  <link rel="stylesheet" href="/index.css">
</head>
  <body data-theme="light">
    <div class="app-container">
      <header class="app-header">
        <div class="logo">
          <h1>Creon</h1>
        </div>
        <nav class="main-nav">
          <a href="#" class="nav-item" data-page="page-icons">Icon Studio</a>
          <a href="#" class="nav-item" data-page="page-id-2d">2D Studio</a>
          <a href="#" class="nav-item" data-page="page-id-3d">3D Studio</a>
          <a href="#" class="nav-item" data-page="page-image">Image Studio</a>
        </nav>
        <div class="header-actions">
          <button class="theme-toggle-btn icon-button" aria-label="Toggle theme" title="Toggle theme">
            <span class="material-symbols-outlined">light_mode</span>
          </button>
          <button class="header-action-btn" aria-label="Settings" title="Settings">
            <span class="material-symbols-outlined">settings</span>
          </button>
          <button class="header-action-btn" aria-label="My Page" title="My Page">
            <span class="material-symbols-outlined">account_circle</span>
          </button>
        </div>
      </header>
      
      <div id="banner-toast" class="banner-toast hidden" role="alert" aria-live="assertive">
        <div class="banner-toast-content">
            <span id="banner-toast-icon" class="material-symbols-outlined"></span>
            <div class="banner-toast-text">
                <strong id="banner-toast-title"></strong>
                <span id="banner-toast-body"></span>
            </div>
        </div>
        <div class="banner-toast-actions">
            <button id="banner-toast-close-btn" class="icon-button" aria-label="Close notification">
                <span class="material-symbols-outlined">close</span>
            </button>
        </div>
      </div>

      <div id="page-usages" class="page-container">
        <div class="explore-container">
          <main class="explore-main">
            <input type="file" id="explore-upload-input" multiple class="hidden" accept="image/png,image/jpeg,image/webp,video/mp4,video/webm">
            
            <div class="hero-content-wrapper">
              <!-- Changelog Section -->
              <div class="changelog-section">
                <div class="changelog-item">
                  <div class="changelog-dot"></div>
                  <span class="changelog-text">New Components: Field, Input Group, Item and more</span>
                  <span class="changelog-arrow">â†’</span>
                </div>
              </div>

              <!-- Hero Section -->
              <div class="hero-section">
                <h1 class="hero-title">Build what you imagine.<br>Create beyond boundaries.</h1>
                <p class="hero-description">From icons to 3D motion, all in one creative pipeline.</p>
                <!-- Generate Box moved inside hero-section -->
                <div class="generate-box has-studio-selected">
                  <select id="studio-selector" class="studio-selector hidden">
                    <option value="icon">Icon</option>
                    <option value="3d" selected>3D</option>
                  </select>
                  <div class="custom-dropdown" id="custom-studio-selector">
                    <button class="custom-dropdown-trigger" type="button" aria-haspopup="listbox" aria-expanded="false">
                      <span class="custom-dropdown-value">3D</span>
                      <span class="material-symbols-outlined custom-dropdown-icon">expand_more</span>
                    </button>
                    <div class="custom-dropdown-menu hidden" role="listbox">
                      <button class="custom-dropdown-option" role="option" data-value="icon" aria-selected="false">
                        <span class="custom-dropdown-option-text">Icon</span>
                        <span class="custom-dropdown-check hidden">
                          <span class="material-symbols-outlined">check</span>
                        </span>
                      </button>
                      <button class="custom-dropdown-option" role="option" data-value="3d" aria-selected="true">
                        <span class="custom-dropdown-option-text">3D</span>
                        <span class="custom-dropdown-check">
                          <span class="material-symbols-outlined">check</span>
                        </span>
                      </button>
                    </div>
                  </div>
                  <input type="text" id="generate-input" placeholder="" />
                  <div class="dynamic-placeholder" id="dynamic-placeholder">Ask Contents Builder to create...</div>
                  <button id="generate-btn" class="generate-btn">
                    <span class="btn-text">Generate</span>
                  </button>
                </div>
                
                <!-- Reference Image Upload Area -->
                <div class="main-reference-container" id="main-reference-container" style="display: none;">
                  <div class="control-card">
                    <h3>Reference Image</h3>
                    <div class="image-drop-zone" id="main-reference-drop-zone">
                      <div class="drop-zone-content">
                        <div class="drop-zone-prompt">
                          <span class="material-symbols-outlined">add_photo_alternate</span>
                          <p>Drop image here or click to upload</p>
                        </div>
                        <img class="drop-zone-preview hidden" alt="Reference preview" />
                      </div>
                      <div class="drop-zone-overlay">
                        <button type="button" id="main-generate-with-text-btn">
                          <span class="material-symbols-outlined">text_fields</span>
                          <span class="overlay-text-label">Generate with Text</span>
                        </button>
                        <div class="overlay-divider"></div>
                        <button type="button" id="main-attach-image-btn">
                          <span class="material-symbols-outlined">attach_file</span>
                          <span class="overlay-text-label">Attach Image</span>
                        </button>
                      </div>
                      <button class="remove-style-image-btn hidden" id="main-remove-reference-btn">
                        <span class="material-symbols-outlined">close</span>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div id="explore-feed-container">
                <div id="explore-empty-state">
                </div>
                <div id="explore-feed" class="explore-feed">
                    <!-- Media cards will be injected here -->
                </div>
                <div id="explore-sentinel" class="explore-sentinel">
                    <div class="loader hidden"></div>
                </div>
                <p id="explore-end-of-results" class="end-of-results-note hidden">End of results</p>
            </div>
          </main>
          <aside id="explore-details-panel" class="details-panel hidden">
            <div class="details-panel-content">
              <header class="details-panel-header">
                  <h2 id="explore-details-title">Details</h2>
                  <button id="explore-details-close-btn" class="icon-button" aria-label="Close Details">
                      <span class="material-symbols-outlined">close</span>
                  </button>
              </header>
              <div class="details-panel-body">
                  <div class="details-preview" id="explore-details-preview-container">
                      <!-- JS will render preview here -->
                  </div>
                  <div id="explore-details-info" class="details-info-grid">
                      <!-- JS will render file info here -->
                  </div>
                  <div id="explore-details-prompt" class="hidden" style="display: flex; flex-direction: column; gap: 8px;">
                      <label style="font-weight: 500;">Used Prompt</label>
                      <div class="code-box">
                          <pre><code id="explore-details-prompt-code"></code></pre>
                          <button id="explore-details-copy-prompt-btn" class="icon-button copy-button" aria-label="Copy prompt">
                            <span class="material-symbols-outlined">content_copy</span>
                          </button>
                      </div>
                  </div>
                   <p id="explore-details-no-prompt" class="hidden" style="font-size: 13px; color: var(--text-secondary);">No prompt found for this asset.</p>
                  <div class="details-actions">
                    <a href="#" id="explore-details-download-btn" class="secondary-btn" download>
                        <span class="material-symbols-outlined">download</span>
                        <span>Download</span>
                    </a>
                  </div>
              </div>
            </div>
          </aside>
        </div>
      </div>
      
      <div id="page-icons" class="page-container hidden">
        <aside class="filters-panel">
          <div class="filters-panel-header">
            <h2>Filters</h2>
            <button id="filters-close-btn" class="icon-button" aria-label="Close Filters">
              <span class="material-symbols-outlined">close</span>
            </button>
          </div>

          <div class="filter-group">
            <label>Style</label>
            <div class="segmented-control">
              <input type="radio" id="style-outlined" name="icon-family" value="Outlined" checked />
              <label for="style-outlined">Outlined</label>
              <input type="radio" id="style-rounded" name="icon-family" value="Rounded" />
              <label for="style-rounded">Rounded</label>
              <input type="radio" id="style-sharp" name="icon-family" value="Sharp" />
              <label for="style-sharp">Sharp</label>
            </div>
          </div>
          
          <div class="filter-group">
             <div class="control-row">
              <label for="fill-toggle">Fill</label>
              <label class="toggle-switch">
                <input type="checkbox" id="fill-toggle" />
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>

          <div class="filter-group">
            <div class="control-row">
              <label for="weight-slider">Weight (Stroke)</label>
              <span class="slider-value" id="weight-value">Value: 400</span>
            </div>
            <input type="range" id="weight-slider" min="100" max="700" value="400" step="100" />
          </div>
          
          <div class="filter-group">
            <div class="control-row">
              <label for="optical-size-slider" class="optical-size-label">
                Optical Size
                <span class="material-symbols-outlined info-icon" title="Optical size automatically adjusts the stroke weight to improve legibility at different icon sizes.">info</span>
              </label>
            </div>
            <input type="range" id="optical-size-slider" min="20" max="48" value="24" step="1" />
            <div class="slider-labels">
                <span>20px</span>
                <span>48px</span>
            </div>
          </div>
        </aside>

        <main class="icon-grid-panel">
          <h1 class="explore-title">Icon Studio</h1>
          <div class="icon-grid-header">
            <div class="search-box">
              <button id="toggle-filters-panel-btn">
                <span class="material-symbols-outlined">tune</span>
                <span>Filter</span>
              </button>
              <input type="search" id="search-input" placeholder="Search icons" />
              <button class="icon-button search-icon-btn" aria-label="Search">
                <span class="material-symbols-outlined">search</span>
              </button>
            </div>
          </div>
          <div id="icon-grid-body" class="icon-grid-body">
            <div id="icon-grid"></div>
          </div>
        </main>

        <aside id="settings-panel" class="settings-panel hidden">
          <div class="settings-panel-content">
            <header class="settings-header">
              <h2 id="settings-title">Settings</h2>
              <button id="settings-close-btn" class="icon-button" aria-label="Close">
                <span class="material-symbols-outlined">close</span>
              </button>
            </header>
            <nav id="settings-tabs" class="settings-tabs">
              <button class="tab-item active" data-tab="details">Details</button>
              <button class="tab-item" data-tab="motion">Motion</button>
              <button class="tab-item" data-tab="3d">3D Generate</button>
            </nav>
            <div class="settings-body">
              <div class="tab-content active" data-tab-content="details">
                <div class="tab-scroll-content">
                  <div class="preview-box-lg" id="preview-box-container">
                      <span id="settings-preview-icon" class="material-symbols-outlined"></span>
                      <img id="settings-preview-image" alt="Generated Icon Preview" class="hidden" />
                  </div>
                  
                  <div id="font-icon-details">
                      <div class="size-color-group">
                        <div class="filter-group">
                            <div class="control-row">
                                <label for="export-size-input">Size</label>
                            </div>
                            <div class="input-with-suffix">
                                <input type="number" id="export-size-input" value="48" min="1">
                                <span>px</span>
                            </div>
                        </div>
                        <div class="filter-group">
                          <div class="control-row">
                            <label for="color-picker">Main Color</label>
                          </div>
                          <div class="input-with-suffix color-input">
                            <div class="input-swatch">
                              <input type="color" id="color-picker" value="#0F172A" class="color-swatch-input" />
                            </div>
                            <span id="color-picker-value" class="color-value">#0F172A</span>
                          </div>
                        </div>
                      </div>

                      <div id="tags-container" class="tags-container"></div>
                      <p id="keywords-display" class="keywords"></p>

                      <div class="code-snippets">
                        <nav id="snippet-tabs" class="snippet-tabs">
                          <button class="snippet-tab-item active" data-lang="html">HTML</button>
                          <button class="snippet-tab-item" data-lang="react">React</button>
                          <button class="snippet-tab-item" data-lang="vue">Vue</button>
                          <button class="snippet-tab-item" data-lang="svelte">Svelte</button>
                        </nav>
                        <div class="code-box">
                          <pre><code id="snippet-code"></code></pre>
                          <button id="copy-snippet-btn" class="icon-button copy-button" aria-label="Copy code">
                            <span class="material-symbols-outlined">content_copy</span>
                          </button>
                        </div>
                      </div>
                  </div>
                </div>
              </div>
              
              <div class="tab-content hidden" data-tab-content="motion">
                <div class="tab-scroll-content">
                    <div class="preview-box-lg" id="motion-preview-box">
                        <span id="motion-preview-icon" class="material-symbols-outlined"></span>
                        <img id="motion-generated-image" alt="Generated 3D Icon Preview" class="hidden" />
                        <div id="lottie-player-container" class="hidden"></div>
                        <div id="motion-loader" class="loader hidden"></div>
                        <p id="motion-error-message" class="hidden"></p>
                    </div>

                    <div class="motion-control-group">
                        <div class="motion-control-row">
                            <div class="control-label">
                                <span>Motion</span>
                            </div>
                            <div class="control-input-group">
                                <select class="motion-select" id="motion-animation-select">
                                    <optgroup label="Appear">
                                        <option value="fade-in">Fade In</option>
                                        <option value="draw-on">Draw On</option>
                                    </optgroup>
                                    <optgroup label="Emphasis">
                                        <option value="bounce">Bounce</option>
                                        <option value="scale">Scale</option>
                                        <option value="shake">Shake</option>
                                        <option value="rotate">Rotate</option>
                                        <option value="breathe">Breathe</option>
                                        <option value="pulse">Pulse</option>
                                        <option value="variable-color">Variable Color</option>
                                        <option value="replace" selected>Replace</option>
                                    </optgroup>
                                    <optgroup label="Disappear">
                                        <option value="fade-out">Fade Out</option>
                                        <option value="draw-off">Draw Off</option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                        <div class="motion-control-row">
                            <div class="control-label">
                                <span>Repeat</span>
                            </div>
                            <div class="control-input-group">
                                <select class="motion-select" id="motion-repeat-select">
                                    <option value="1">Once</option>
                                    <option value="infinite">Loop</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-footer">
                  <div class="motion-actions">
                      <button id="motion-play-btn" class="secondary-btn">
                          <span class="material-symbols-outlined">play_arrow</span>
                          Play
                      </button>
                      <button id="convert-to-lottie-btn" class="primary-btn">
                          <span class="material-symbols-outlined">download</span>
                          <span class="btn-text">Lottie</span>
                          <div class="btn-loader"></div>
                      </button>
                  </div>
                </div>
              </div>

              <div class="tab-content hidden" data-tab-content="3d">
                <div class="tab-scroll-content">
                  <div class="preview-box-lg">
                      <div id="id-3d-placeholder" class="preview-placeholder">
                          <span class="material-symbols-outlined">auto_awesome</span>
                          <p>Your 3D icon will appear here</p>
                      </div>
                      <div id="id-3d-error-placeholder" class="preview-placeholder hidden">
                          <span class="material-symbols-outlined">error</span>
                          <p class="error-text">Generation failed. Please try again.</p>
                      </div>
                      <div id="loader" class="loader hidden"></div>
                      <img id="generated-image" alt="Generated 3D Icon" class="hidden" />
                      <button id="view-larger-btn" class="icon-button view-larger-btn hidden" aria-label="View larger">
                          <span class="material-symbols-outlined">zoom_in</span>
                      </button>
                  </div>

                  <div class="prompt-display-wrapper">
                      <div class="prompt-card-header">
                          <label for="prompt-display-3d">Style Constraints</label>
                      </div>
                      <textarea id="prompt-display-3d" readonly></textarea>
                      <div class="shadow-toggle-control">
                          <label for="shadow-toggle-icons">Add Ground Shadow</label>
                          <label class="toggle-switch">
                            <input type="checkbox" id="shadow-toggle-icons">
                            <span class="toggle-slider"></span>
                          </label>
                      </div>
                  </div>

                  <div class="filter-group">
                      <label for="icon-pose-input">Action(Optional)</label>
                      <input type="text" id="icon-pose-input" placeholder="e.g., Sparring stance throwing a punch">
                  </div>
                  <div class="filter-group">
                      <label>Reference Images (Optional)</label>
                      <div id="reference-image-container-3d" class="reference-image-container">
                          <div class="image-drop-zone reference-drop-zone" data-index="0">
                              <div class="drop-zone-prompt">
                                  <span class="material-symbols-outlined">add_photo_alternate</span>
                              </div>
                              <img class="style-image-preview hidden" alt="Reference image 1">
                              <button class="remove-style-image-btn icon-button hidden" aria-label="Remove image 1">
                                  <span class="material-symbols-outlined">delete</span>
                              </button>
                          </div>
                          <div class="image-drop-zone reference-drop-zone" data-index="1">
                              <div class="drop-zone-prompt">
                                  <span class="material-symbols-outlined">add_photo_alternate</span>
                              </div>
                              <img class="style-image-preview hidden" alt="Reference image 2">
                              <button class="remove-style-image-btn icon-button hidden" aria-label="Remove image 2">
                                  <span class="material-symbols-outlined">delete</span>
                              </button>
                          </div>
                          <div class="image-drop-zone reference-drop-zone" data-index="2">
                              <div class="drop-zone-prompt">
                                  <span class="material-symbols-outlined">add_photo_alternate</span>
                              </div>
                              <img class="style-image-preview hidden" alt="Reference image 3">
                              <button class="remove-style-image-btn icon-button hidden" aria-label="Remove image 3">
                                  <span class="material-symbols-outlined">delete</span>
                              </button>
                          </div>
                      </div>
                      <input type="file" id="reference-image-input-3d" class="hidden" accept="image/*">
                  </div>
                </div>
                <div class="tab-footer">
                  <div class="settings-actions">
                    <button id="convert-to-3d-btn" class="primary-btn">
                      <span class="material-symbols-outlined">auto_awesome</span>
                      <span class="btn-text">Generate</span>
                      <div class="btn-loader"></div>
                    </button>
                    <a href="#" id="download-3d-btn" class="secondary-btn hidden" download="icon_3d.png">
                      <span class="material-symbols-outlined">download</span> Download
                    </a>
                    <button id="regenerate-3d-btn" class="secondary-btn hidden">
                      <span class="material-symbols-outlined">refresh</span>
                      <span class="btn-text">Recreate</span>
                      <div class="btn-loader"></div>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          <footer class="settings-footer" data-visible-tab="details">
            <div class="settings-actions">
              <button class="secondary-btn" id="download-svg-btn" disabled>
                <span class="material-symbols-outlined">download</span>
                <span>SVG</span>
              </button>
              <button class="secondary-btn" id="download-png-btn" disabled>
                <span class="material-symbols-outlined">download</span>
                <span>PNG</span>
              </button>
            </div>
          </footer>
          </div>
        </aside>
      </div>

      <div id="page-id-2d" class="page-container hidden">
        <div class="image-gen-container">
            <div class="image-gen-controls">
                <div class="controls-scroll-area">
                    <div class="control-card history-panel hidden">
                        <div class="history-header">
                            <h3>History</h3>
                            <div class="history-actions">
                                <div class="history-nav-controls">
                                    <button id="p2d-history-back-btn" class="icon-button" aria-label="Previous">
                                        <span class="material-symbols-outlined">arrow_back</span>
                                    </button>
                                    <span id="p2d-history-counter">0 / 0</span>
                                    <button id="p2d-history-forward-btn" class="icon-button" aria-label="Next">
                                        <span class="material-symbols-outlined">arrow_forward</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="history-list-container">
                            <ul id="p2d-history-list"></ul>
                            <div id="p2d-history-placeholder" class="hidden">
                                <p>Your generated images will appear here.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 1. Prompt Card -->
                    <div class="control-card">
                        <div class="prompt-card-header">
                            <h3>Prompt</h3>
                        </div>
                        <input type="text" id="p2d-image-prompt-subject-input" placeholder="e.g., A cute cat wearing a wizard hat">
                        
                        <!-- Generate Button -->
                        <button id="p2d-image-generate-btn" class="primary-btn">
                            <span class="material-symbols-outlined">auto_awesome</span>
                            <span class="btn-text">Generate</span>
                            <div class="btn-loader"></div>
                        </button>
                    </div>
                    
                    <!-- 2. Prompt Detail Card -->
                    <div class="control-card">
                        <div class="detail-group">
                            <h3 class="options-title">Options</h3>
                            <div class="options-group p2d-options-group">
                            <div class="option-row">
                                <label for="p2d-fill-toggle">Fill</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="p2d-fill-toggle">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="option-row">
                                <label for="p2d-color-picker">Main Color</label>
                                <div class="input-with-suffix color-input">
                                    <div class="input-swatch">
                                        <input type="color" id="p2d-color-picker" value="#212121" class="color-swatch-input" />
                                    </div>
                                    <span class="color-value">#212121</span>
                                </div>
                            </div>
                        </div>
                        </div>
                        <div class="detail-group">
                            <div class="prompt-card-header">
                                <h3>Prompt Detail</h3>
                            </div>
                            <textarea id="p2d-image-prompt-display" readonly></textarea>
                        </div>
                    </div>
                    <div class="control-card">
                        <!-- Reference Images Accordion -->
                        <div class="accordion">
                            <div class="accordion-header" data-accordion="p2d-reference">
                                <h3>Reference Images</h3>
                                <span class="material-symbols-outlined accordion-icon">expand_more</span>
                            </div>
                            <div class="accordion-content" id="p2d-reference-content">
                                <div id="p2d-edit-reference-image-container-3d" class="reference-image-container">
                            <div class="image-drop-zone reference-drop-zone" data-index="0">
                                <span class="slot-title">Fill_On</span>
                                <div class="drop-zone-prompt"><span class="material-symbols-outlined">add_photo_alternate</span><p>Drop or click</p></div>
                                <img class="style-image-preview hidden" alt="Reference image 1">
                                <button class="remove-style-image-btn icon-button hidden" aria-label="Remove image 1"><span class="material-symbols-outlined">delete</span></button>
                            </div>
                            <div class="image-drop-zone reference-drop-zone" data-index="1">
                                <span class="slot-title">Fill_Off</span>
                                <div class="drop-zone-prompt"><span class="material-symbols-outlined">add_photo_alternate</span><p>Drop or click</p></div>
                                <img class="style-image-preview hidden" alt="Reference image 2">
                                <button class="remove-style-image-btn icon-button hidden" aria-label="Remove image 2"><span class="material-symbols-outlined">delete</span></button>
                            </div>
                            <div class="image-drop-zone reference-drop-zone" data-index="2">
                                <span class="slot-title">Weight_light</span>
                                <div class="drop-zone-prompt"><span class="material-symbols-outlined">add_photo_alternate</span><p>Drop or click</p></div>
                                <img class="style-image-preview hidden" alt="Reference image 3">
                                <button class="remove-style-image-btn icon-button hidden" aria-label="Remove image 3"><span class="material-symbols-outlined">delete</span></button>
                            </div>
                            <div class="image-drop-zone reference-drop-zone" data-index="3">
                                <span class="slot-title">Weight_bold</span>
                                <div class="drop-zone-prompt"><span class="material-symbols-outlined">add_photo_alternate</span><p>Drop or click</p></div>
                                <img class="style-image-preview hidden" alt="Reference image 4">
                                <button class="remove-style-image-btn icon-button hidden" aria-label="Remove image 4"><span class="material-symbols-outlined">delete</span></button>
                            </div>
                        </div>
                            </div>
                        </div>
                        <input type="file" id="p2d-edit-reference-image-input-3d" class="hidden" accept="image/*">
                    </div>
                    <!-- 4. Image Library Accordion Card -->
                    <div class="control-card">
                        <div class="accordion">
                            <div class="accordion-header" data-accordion="p2d-library">
                                <h3>Image Library</h3>
                                <span class="material-symbols-outlined accordion-icon">expand_more</span>
                            </div>
                            <div class="accordion-content" id="p2d-library-content">
                                <div id="p2d-image-library-container" class="image-library-container">
                                    <div id="p2d-image-library-placeholder">
                                        <p>Your saved images will appear here.</p>
                                    </div>
                                    <div id="p2d-image-library-list" class="image-library-list"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="image-gen-results">
                <div class="result-container">
                    <div id="p2d-result-item-main" class="result-item" tabindex="0">
                        <div class="result-item-content">
                            <div class="result-content-header hidden">
                                <div class="preview-switcher">
                                    <button id="p2d-preview-tab-image" class="preview-tab-item active" data-tab="image">Image</button>
                                    <button id="p2d-preview-tab-motion" class="preview-tab-item" data-tab="motion">Motion</button>
                                </div>
                                <div class="result-actions">
                                    <button id="p2d-toggle-details-panel-btn" class="icon-button" aria-label="Toggle details panel">
                                        <span class="material-symbols-outlined">info</span>
                                    </button>
                                </div>
                            </div>
                            <div class="result-media-container" id="p2d-result-media-container">
                                <div id="p2d-result-idle-placeholder" class="result-placeholder-content" style="display: flex; justify-content: center; align-items: center; height: 100%; background: #ffffff; position: relative; overflow: hidden;">
                                    <div id="p2d-animated-samples-container" style="position: absolute; display: flex; flex-direction: row; gap: 48px; opacity: 0.3; animation: scrollLeft 130s linear infinite; align-items: center;">
                                        <!-- Images will be loaded dynamically from assets_2d_images.json -->
                                    </div>
                                </div>
                                <div class="result-placeholder hidden">
                                    <div class="result-loading">
                                        <div class="loader"></div>
                                        <span class="loader-text">Generating...</span>
                                    </div>
                                    <div class="result-error">
                                        <span class="material-symbols-outlined">error</span>
                                        <p>Generation Failed</p>
                                        <button id="p2d-retry-generate-btn" class="secondary-btn">Try Again</button>
                                    </div>
                                </div>
                                <div id="p2d-motion-prompt-placeholder" class="result-placeholder-content hidden">
                                    <span class="material-symbols-outlined motion-placeholder-icon">movie</span>
                                    <p class="motion-placeholder-title">Ready to animate?</p>
                                    <p>Generate a motion prompt to create a looping animation from this icon.</p>
                                    <button id="p2d-generate-motion-from-preview-btn" class="secondary-btn motion-generate-btn">
                                      <span class="material-symbols-outlined">animation</span>
                                      Generate Motion
                                    </button>
                                </div>
                                <video id="p2d-result-video" class="result-video hidden" controls loop autoplay muted playsinline></video>
                                <img src="" alt="Generated 2D image" class="result-image hidden" id="p2d-result-image-main">
                                <label class="checkerboard-toggle" id="p2d-result-checkerboard-toggle" style="display: none;">
                                    <input type="checkbox" id="p2d-result-checkerboard-checkbox" checked>
                                    <span>Show checkerboard</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <aside id="p2d-image-details-panel" class="details-panel hidden">
                <div class="details-panel-content">
                    <header class="details-panel-header">
                        <h2>Details</h2>
                        <button id="p2d-details-close-btn" class="icon-button" aria-label="Close details">
                            <span class="material-symbols-outlined">close</span>
                        </button>
                    </header>
                    <div class="details-panel-tabs">
                        <button class="tab-item active" data-tab="detail">Detail</button>
                        <button class="tab-item" data-tab="motion">Motion</button>
                        <button class="tab-item" data-tab="history">History</button>
                    </div>
                    <div class="details-panel-body">
                        <div class="details-tab-content" data-tab-content="detail">
                            <div class="details-content-scroll">
                                <div class="details-preview" id="p2d-details-preview-container">
                                    <img id="p2d-details-preview-image" src="" alt="Details preview">
                                    <label class="checkerboard-toggle" id="p2d-preview-checkerboard-toggle" style="display: none;">
                                        <input type="checkbox" id="p2d-preview-checkerboard-checkbox" checked>
                                        <span>Show checkerboard</span>
                                    </label>
                                </div>
                                
                                <!-- Fix the icon section -->
                                <div style="display: flex; flex-direction: column; gap: var(--spacing-3);">
                                    <h3 style="font-size: 16px; font-weight: 600; margin: 0;">Fix the icon</h3>
                                    <div class="details-fix-section">
                                        <div id="p2d-fix-icon-content">
                                    <!-- Stroke Color Input -->
                                    <div class="option-row">
                                        <label for="p2d-object-color-picker">Stroke</label>
                                        <div class="input-with-suffix color-input">
                                          <div class="input-swatch">
                                            <input type="color" id="p2d-object-color-picker" value="#000000" class="color-swatch-input" />
                                          </div>
                                          <span class="color-value">#000000</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Recreate Button (full width, above) -->
                                    <button id="p2d-regenerate-btn" class="secondary-btn" style="width: 100%; margin-top: var(--spacing-2); height: 40px;" disabled>
                                        <span class="material-symbols-outlined">auto_awesome</span>
                                        <span class="btn-text">Recreate</span>
                                        <div class="btn-loader"></div>
                                    </button>
                                    
                                    <!-- Remove BG and Convert to SVG (below) -->
                                    <div id="p2d-action-buttons-container" style="display: grid; grid-template-columns: 1fr; gap: var(--spacing-2); margin-top: var(--spacing-2);">
                                        <button id="p2d-remove-background-btn" class="secondary-btn">
                                            <span class="material-symbols-outlined">content_cut</span> Remove BG
                                        </button>
                                        <button id="p2d-convert-to-svg-btn" class="secondary-btn" style="display: none;">
                                            <span class="material-symbols-outlined">code</span> Convert to SVG
                                        </button>
                                    </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Bottom Actions: More menu + Download -->
                            <div class="details-actions p2d-details-actions">
                                <button id="p2d-more-menu-btn" class="icon-button" aria-label="More actions" title="More actions">
                                    <span class="material-symbols-outlined">more_horiz</span>
                                </button>
                                <!-- More menu dropdown -->
                                <div id="p2d-more-menu" class="kebab-menu hidden" style="position: absolute; left: 0; bottom: 56px; background: var(--surface-color); border: 1px solid var(--border-color); border-radius: var(--border-radius-md); box-shadow: 0 8px 24px rgba(0,0,0,0.12); width: 180px; overflow: hidden; z-index: 20;">
                                    <button id="p2d-more-copy" class="secondary-btn" style="width: 100%; justify-content: flex-start; gap: var(--spacing-2); border: none; background: transparent;">
                                        <span class="material-symbols-outlined">content_copy</span> Copy
                                    </button>
                                    <button id="p2d-more-delete" class="secondary-btn danger" style="width: 100%; justify-content: flex-start; gap: var(--spacing-2); border: none; background: transparent;">
                                        <span class="material-symbols-outlined">delete</span> Delete
                                    </button>
                                </div>
                                <a href="#" id="p2d-download-png-btn" class="secondary-btn hidden" download>
                                    <span class="material-symbols-outlined">download</span> PNG
                                </a>
                                <a href="#" id="p2d-download-svg-btn" class="secondary-btn hidden" download>
                                    <span class="material-symbols-outlined">download</span> SVG
                                </a>
                            </div>
                        </div>
                        
                        <!-- Motion Tab Content -->
                        <div class="details-tab-content hidden" data-tab-content="motion">
                            <div class="motion-fixed-header">
                                <div class="motion-thumbnail-container">
                                    <img id="p2d-motion-thumbnail-image" src="" alt="Motion thumbnail">
                                    <div class="motion-thumbnail-info">
                                        <span id="p2d-motion-thumbnail-label"></span>
                                        <span class="motion-thumbnail-desc">Ready for animation</span>
                                    </div>
                                </div>
                            </div>
                            <div class="motion-scroll-content">
                                <div class="video-result-container hidden" id="p2d-motion-video-container">
                                    <video id="p2d-motion-video-player" controls loop autoplay muted playsinline></video>
                                    <div id="p2d-motion-video-loader" class="result-loading hidden">
                                        <div class="loader"></div>
                                        <span id="p2d-motion-gen-status-text" class="loader-text">Generating video...</span>
                                    </div>
                                </div>
                                <div id="p2d-motion-reference-image-container" class="reference-image-container">
                                  <div class="image-drop-zone reference-drop-zone" data-index="0">
                                    <span class="slot-title">First Frame</span>
                                    <div class="drop-zone-prompt"><p style="font-size:12px">Drop or click</p></div>
                                    <img class="style-image-preview hidden" alt="First frame reference image">
                                    <button class="remove-style-image-btn icon-button hidden" aria-label="Remove First Frame"><span class="material-symbols-outlined">delete</span></button>
                                  </div>
                                  <div class="image-drop-zone reference-drop-zone" data-index="1">
                                    <span class="slot-title">Last Frame</span>
                                    <div class="drop-zone-prompt"><p style="font-size:12px">Drop or click</p></div>
                                    <img class="style-image-preview hidden" alt="Last frame reference image">
                                    <button class="remove-style-image-btn icon-button hidden" aria-label="Remove Last Frame"><span class="material-symbols-outlined">delete</span></button>
                                  </div>
                                </div>
                                <input type="file" id="p2d-motion-reference-image-input" class="hidden" accept="image/*">
                                <div class="control-card" style="padding: 0;">
                                    <h3>Generation Speed</h3>
                                    <div class="segmented-control" id="p2d-motion-model-select">
                                        <input type="radio" id="p2d-motion-model-fast" name="p2d-motion-model" value="veo-3.1-fast-generate-preview" checked />
                                        <label for="p2d-motion-model-fast">Fast</label>
                                        <input type="radio" id="p2d-motion-model-hq" name="p2d-motion-model" value="veo-3.1-generate-preview" />
                                        <label for="p2d-motion-model-hq">High Quality</label>
                                    </div>
                                </div>
                                <div id="p2d-motion-prompt-output" class="hidden">
                                    <div class="control-card">
                                        <label for="p2d-motion-prompt-final-english">Final Prompt</label>
                                        <textarea id="p2d-motion-prompt-final-english" rows="4"></textarea>
                                    </div>
                                    <div class="control-card">
                                        <label>Description (Korean)</label>
                                        <div id="p2d-motion-prompt-korean" class="description-box"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="details-actions p2d-motion-actions">
                                <button id="p2d-generate-motion-prompt-btn" class="primary-btn full-width-btn">
                                    <span class="material-symbols-outlined">animation</span>
                                    <span class="btn-text">Generate Prompt</span>
                                    <div class="btn-loader"></div>
                                </button>
                                <button id="p2d-regenerate-motion-prompt-btn" class="secondary-btn hidden full-width-btn">
                                    <span class="material-symbols-outlined">refresh</span>
                                    <span class="btn-text">Recreate Motion Prompt</span>
                                    <div class="btn-loader"></div>
                                </button>
                                <button id="p2d-generate-video-btn" class="primary-btn hidden full-width-btn">
                                    <span class="material-symbols-outlined">movie</span>
                                    <span class="btn-text">Generate Video</span>
                                    <div class="btn-loader"></div>
                                </button>
                                <button id="p2d-regenerate-video-btn" class="secondary-btn hidden full-width-btn">
                                    <span class="material-symbols-outlined">refresh</span>
                                    <span class="btn-text">Recreate Video</span>
                                    <div class="btn-loader"></div>
                                </button>
                                <div class="download-buttons-row" style="display: none;">
                                    <button id="p2d-motion-more-menu-btn" class="icon-button" aria-label="More actions" title="More actions">
                                        <span class="material-symbols-outlined">more_horiz</span>
                                    </button>
                                    <div id="p2d-motion-more-menu" class="kebab-menu hidden" style="position: absolute; left: 0; bottom: 56px; background: var(--surface-color); border: 1px solid var(--border-color); border-radius: var(--border-radius-md); box-shadow: 0 8px 24px rgba(0,0,0,0.12); width: 200px; overflow: hidden; z-index: 20;">
                                        <button id="p2d-motion-more-regenerate-prompt" class="secondary-btn" style="width: 100%; justify-content: flex-start; gap: var(--spacing-2); border: none; background: transparent;">
                                            <span class="material-symbols-outlined">refresh</span> Recreate Prompt
                                        </button>
                                        <button id="p2d-motion-more-regenerate-video" class="secondary-btn" style="width: 100%; justify-content: flex-start; gap: var(--spacing-2); border: none; background: transparent;">
                                            <span class="material-symbols-outlined">refresh</span> Recreate Video
                                        </button>
                                        <button id="p2d-convert-to-gif-btn" class="secondary-btn" style="width: 100%; justify-content: flex-start; gap: var(--spacing-2); border: none; background: transparent;">
                                            <span class="material-symbols-outlined">gif</span> Convert to GIF
                                        </button>
                                    </div>
                                    <a href="#" id="p2d-download-gif-btn" class="secondary-btn hidden" download>
                                        <span class="material-symbols-outlined">download</span> GIF
                                    </a>
                                    <a href="#" id="p2d-download-video-btn" class="secondary-btn hidden" download>
                                        <span class="material-symbols-outlined">download</span> MP4
                                    </a>
                                </div>
                            </div>
                        </div>
                        
                        <!-- History Tab Content -->
                        <div class="details-tab-content hidden" data-tab-content="history">
                            <div id="p2d-details-history-list" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 12px; padding: var(--spacing-2); overflow-y: auto;">
                                <!-- History items will be rendered here -->
                            </div>
                        </div>
                    </div>
                </div>
            </aside>
        </div>
      </div>
      
      <div id="page-id-3d" class="page-container hidden">
        <div class="image-gen-container">
            <div class="image-gen-controls">
                <div class="controls-scroll-area">
                    <div class="control-card history-panel hidden">
                        <div class="history-header">
                            <h3>History</h3>
                            <div class="history-actions">
                                <div class="history-nav-controls">
                                    <button id="history-back-btn" class="icon-button" aria-label="Previous">
                                        <span class="material-symbols-outlined">arrow_back</span>
                                    </button>
                                    <span id="history-counter">0 / 0</span>
                                    <button id="history-forward-btn" class="icon-button" aria-label="Next">
                                        <span class="material-symbols-outlined">arrow_forward</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="history-list-container">
                            <ul id="history-list"></ul>
                            <div id="history-placeholder" class="hidden">
                                <p>Your generated images will appear here.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="control-card">
                        <div class="prompt-card-header">
                            <h3>Prompt</h3>
                        </div>
                        <input type="text" id="image-prompt-subject-input" class="form-input-sm" placeholder="e.g., A cute cat wearing a wizard hat">

                        <div class="filter-group" style="margin-top: var(--spacing-3);">
                          <label for="image-pose-input">Action(Optional)</label>
                          <input type="text" id="image-pose-input" class="form-input-sm" placeholder="e.g., Sparring stance throwing a punch">
                        </div>

                        <!-- Generate Button -->
                        <button id="image-generate-btn" class="primary-btn">
                            <span class="material-symbols-outlined">auto_awesome</span>
                            <span class="btn-text">Generate</span>
                            <div class="btn-loader"></div>
                        </button>
                        
                    </div>
                    <!-- Prompt Detail & Options Card -->
                    <div class="control-card">
                        <div class="detail-group">
                            <h3 class="options-title">Options</h3>
                            <div class="options-group p3d-options-group">
                            <div class="shadow-toggle-control">
                                <label for="shadow-toggle-3d">Add Shadow</label>
                                <label class="toggle-switch">
                                  <input type="checkbox" id="shadow-toggle-3d">
                                  <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="filter-group">
                              <label for="background-color-picker-3d">BG Color</label>
                              <div class="input-with-suffix color-input">
                                <div class="input-swatch">
                                  <input type="color" id="background-color-picker-3d" value="#FFFFFF" class="color-swatch-input" />
                                </div>
                                <span class="color-value">#FFFFFF</span>
                              </div>
                            </div>
                            <div class="filter-group">
                              <label for="object-color-picker-3d">Main Color</label>
                              <div class="input-with-suffix color-input">
                                <div class="input-swatch">
                                  <input type="color" id="object-color-picker-3d" value="#2962FF" class="color-swatch-input" />
                                </div>
                                <span class="color-value">#2962FF</span>
                              </div>
                            </div>
                        </div>
                        <div class="detail-group">
                            <div class="prompt-card-header">
                                <h3>Prompt Detail</h3>
                            </div>
                            <textarea id="image-prompt-display" readonly></textarea>
                        </div>
                        </div>
                    </div>
                    <!-- 3. Reference Images Accordion Card -->
                    <div class="control-card">
                        <div class="accordion">
                            <div class="accordion-header" data-accordion="3d-reference">
                                <h3>Reference Images</h3>
                                <span class="material-symbols-outlined accordion-icon">expand_more</span>
                            </div>
                            <div class="accordion-content" id="3d-reference-content">
                                <div id="edit-reference-image-container-3d" class="reference-image-container">
                            <div class="image-drop-zone reference-drop-zone" data-index="0">
                                <div class="drop-zone-prompt"><span class="material-symbols-outlined">add_photo_alternate</span><p>Drop or click</p></div>
                                <img class="style-image-preview hidden" alt="Reference image 1">
                                <button class="remove-style-image-btn icon-button hidden" aria-label="Remove image 1"><span class="material-symbols-outlined">delete</span></button>
                            </div>
                            <div class="image-drop-zone reference-drop-zone" data-index="1">
                                <div class="drop-zone-prompt"><span class="material-symbols-outlined">add_photo_alternate</span><p>Drop or click</p></div>
                                <img class="style-image-preview hidden" alt="Reference image 2">
                                <button class="remove-style-image-btn icon-button hidden" aria-label="Remove image 2"><span class="material-symbols-outlined">delete</span></button>
                            </div>
                            <div class="image-drop-zone reference-drop-zone" data-index="2">
                                <div class="drop-zone-prompt"><span class="material-symbols-outlined">add_photo_alternate</span><p>Drop or click</p></div>
                                <img class="style-image-preview hidden" alt="Reference image 3">
                                <button class="remove-style-image-btn icon-button hidden" aria-label="Remove image 3"><span class="material-symbols-outlined">delete</span></button>
                            </div>
                                </div>
                                <input type="file" id="edit-reference-image-input-3d" class="hidden" accept="image/*">
                            </div>
                        </div>
                    </div>
                    <!-- 4. Image Library Accordion Card -->
                    <div class="control-card">
                        <div class="accordion">
                            <div class="accordion-header" data-accordion="3d-library">
                                <h3>Image Library</h3>
                                <span class="material-symbols-outlined accordion-icon">expand_more</span>
                            </div>
                            <div class="accordion-content" id="3d-library-content">
                                <div id="image-library-container" class="image-library-container">
                                    <div id="image-library-placeholder">
                                        <p>Your saved images will appear here.</p>
                                    </div>
                                    <div id="image-library-list" class="image-library-list"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="image-gen-results">
                <div class="result-container">
                    <div id="result-item-main" class="result-item" tabindex="0">
                        <div class="result-item-content">
                            <div class="result-content-header hidden">
                                <div class="preview-switcher">
                                    <button class="preview-tab-item active" data-tab="image">Image</button>
                                    <button class="preview-tab-item" data-tab="video">Motion</button>
                                </div>
                                <div class="result-actions">
                                    <button id="toggle-details-panel-btn" class="icon-button" aria-label="Toggle details panel">
                                        <span class="material-symbols-outlined">info</span>
                                    </button>
                                </div>
                            </div>
                            <div class="result-media-container" id="result-media-container-3d">
                                <div id="result-idle-placeholder" class="result-placeholder-content" style="display: flex; justify-content: center; align-items: center; height: 100%; background: #ffffff; position: relative; overflow: hidden;">
                                    <div id="animated-samples-container" style="position: absolute; display: flex; flex-direction: row; gap: 48px; opacity: 0.3; animation: scrollLeft 130s linear infinite; align-items: center;">
                                        <!-- Images will be loaded dynamically from assets_3d_images.json -->
                                    </div>
                                </div>
                                <div class="result-placeholder hidden">
                                    <div class="result-loading">
                                        <div class="loader"></div>
                                        <span class="loader-text">Generating...</span>
                                    </div>
                                    <div class="result-error">
                                        <span class="material-symbols-outlined">error</span>
                                        <p>Generation Failed</p>
                                        <button id="retry-generate-btn" class="secondary-btn">Try Again</button>
                                    </div>
                                </div>
                                <div id="motion-prompt-placeholder" class="result-placeholder-content hidden">
                                    <span class="material-symbols-outlined motion-placeholder-icon">movie</span>
                                    <p class="motion-placeholder-title">Ready to bring it to life?</p>
                                    <p>Generate a motion prompt to create a video from this image.</p>
                                    <button id="generate-motion-from-preview-btn" class="secondary-btn motion-generate-btn">
                                      <span class="material-symbols-outlined">animation</span>
                                      Generate Motion
                                    </button>
                                </div>
                                <img src="" alt="Generated 3D image" class="result-image hidden">
                                <video src="" class="result-video hidden" controls loop autoplay muted playsinline></video>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <aside id="image-details-panel" class="details-panel hidden">
                <div class="details-panel-content">
                    <header class="details-panel-header">
                        <h2>Details</h2>
                        <button id="details-close-btn" class="icon-button" aria-label="Close details">
                            <span class="material-symbols-outlined">close</span>
                        </button>
                    </header>
                    <nav class="details-panel-tabs">
                        <button class="tab-item active" data-tab="detail">Detail</button>
                        <button class="tab-item" data-tab="motion">Motion</button>
                        <button class="tab-item" data-tab="history">History</button>
                    </nav>
                    <div class="details-panel-body">
                        <div class="details-tab-content active" data-tab-content="detail">
                            <div class="details-content-scroll">
                                <div class="details-preview" id="details-preview-container-3d">
                                    <img id="details-preview-image" src="" alt="Details preview">
                                    <label class="checkerboard-toggle" id="details-preview-checkerboard-toggle-3d" style="display: none;">
                                        <input type="checkbox" id="details-preview-checkerboard-checkbox-3d" checked>
                                        <span>Show checkerboard</span>
                                    </label>
                                </div>
                                <div style="display: flex; flex-direction: column; gap: var(--spacing-3);">
                                    <h3 style="font-size: 16px; font-weight: 600; margin: 0;">Fix the image</h3>
                                    <div class="details-fix-section">
                                    <div id="3d-fix-content" class="options-group">
                                    <!-- Color Inputs Group -->
                                    <div style="display: flex; flex-direction: column; gap: 16px; margin-bottom: 16px;">
                                        <div style="display: grid; grid-template-columns: 80px 1fr; gap: var(--spacing-3); align-items: center;">
                                            <label style="font-size: 14px; font-weight: 500;">BG Color</label>
                                            <div class="input-with-suffix color-input">
                                              <div class="input-swatch">
                                                <input type="color" id="details-background-color-picker-3d" value="#FFFFFF" class="color-swatch-input" />
                                              </div>
                                              <span class="color-value">#FFFFFF</span>
                                            </div>
                                        </div>
                                        
                                        <div style="display: grid; grid-template-columns: 80px 1fr; gap: var(--spacing-3); align-items: center;">
                                            <label style="font-size: 14px; font-weight: 500;">Main Color</label>
                                            <div class="input-with-suffix color-input">
                                              <div class="input-swatch">
                                                <input type="color" id="details-object-color-picker-3d" value="#2962FF" class="color-swatch-input" />
                                              </div>
                                              <span class="color-value">#2962FF</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Action Buttons - Vertical Layout -->
                                    <div style="display: flex; flex-direction: column; gap: var(--spacing-2);">
                                        <button id="details-zoom-out-1-5x-btn" class="secondary-btn" style="width: 100%;">
                                            <span class="material-symbols-outlined">zoom_out</span>
                                            <span class="btn-text">Zoom Out 1.5x</span>
                                        </button>
                                        <button id="details-remove-bg-btn" class="secondary-btn" style="width: 100%;">
                                            <span class="btn-text">Remove BG</span>
                                            <div class="btn-loader"></div>
                                        </button>
                                        <button id="details-fix-btn" class="primary-btn" style="width: 100%;" disabled>
                                            <span class="material-symbols-outlined">autorenew</span>
                                            <span class="btn-text">Recreate</span>
                                            <div class="btn-loader"></div>
                                        </button>
                                    </div>
                                    </div>
                                </div>
                            </div>
                            </div>
                            <div class="details-actions image-details-actions">
                                <button id="details-more-menu-btn" class="icon-button" aria-label="More actions" title="More actions">
                                    <span class="material-symbols-outlined">more_horiz</span>
                                </button>
                                <div id="details-more-menu" class="kebab-menu hidden" style="position: absolute; left: 0; bottom: 56px; background: var(--surface-color); border: 1px solid var(--border-color); border-radius: var(--border-radius-md); box-shadow: 0 8px 24px rgba(0,0,0,0.12); width: 200px; overflow: hidden; z-index: 20;">
                                    <button id="details-more-upscale" class="secondary-btn" style="width: 100%; justify-content: flex-start; gap: var(--spacing-2); border: none; background: transparent;">
                                        <span class="material-symbols-outlined">photo_size_select_actual</span> Upscale
                                    </button>
                                    <button id="details-more-copy" class="secondary-btn" style="width: 100%; justify-content: flex-start; gap: var(--spacing-2); border: none; background: transparent;">
                                        <span class="material-symbols-outlined">content_copy</span> Copy Prompt
                                    </button>
                                    <button id="details-more-delete" class="secondary-btn danger" style="width: 100%; justify-content: flex-start; gap: var(--spacing-2); border: none; background: transparent;">
                                        <span class="material-symbols-outlined">delete</span> Delete
                                    </button>
                                </div>
                                <a href="#" id="details-download-btn" class="secondary-btn" download style="flex: 1;">
                                    <span class="material-symbols-outlined">download</span> Download
                                </a>
                            </div>
                        </div>
                        <div class="details-tab-content hidden" data-tab-content="motion">
                            <div class="motion-fixed-header">
                                <div class="motion-thumbnail-container">
                                    <img id="motion-thumbnail-image" src="" alt="Motion thumbnail">
                                    <div class="motion-thumbnail-info">
                                        <span id="motion-thumbnail-label"></span>
                                        <span class="motion-thumbnail-desc">Ready for animation</span>
                                    </div>
                                </div>
                            </div>
                            <div class="motion-scroll-content">
                                <div class="video-result-container hidden" id="motion-video-container">
                                    <video id="motion-video-player" controls loop autoplay muted playsinline></video>
                                    <div id="motion-video-loader" class="result-loading hidden">
                                        <div class="loader"></div>
                                        <span id="motion-gen-status-text" class="loader-text">Generating video...</span>
                                    </div>
                                </div>
                                <div id="motion-reference-image-container" class="reference-image-container">
                                  <div class="image-drop-zone reference-drop-zone" data-index="0">
                                    <span class="slot-title">First Frame</span>
                                    <div class="drop-zone-prompt"><p style="font-size:12px">Drop or click</p></div>
                                    <img class="style-image-preview hidden" alt="First frame reference image">
                                    <button class="remove-style-image-btn icon-button hidden" aria-label="Remove First Frame"><span class="material-symbols-outlined">delete</span></button>
                                  </div>
                                  <div class="image-drop-zone reference-drop-zone" data-index="1">
                                    <span class="slot-title">Last Frame</span>
                                    <div class="drop-zone-prompt"><p style="font-size:12px">Drop or click</p></div>
                                    <img class="style-image-preview hidden" alt="Last frame reference image">
                                    <button class="remove-style-image-btn icon-button hidden" aria-label="Remove Last Frame"><span class="material-symbols-outlined">delete</span></button>
                                  </div>
                                </div>
                                <input type="file" id="motion-reference-image-input" class="hidden" accept="image/*">
                                <div class="control-card" style="padding: 0;">
                                    <h3>Generation Speed</h3>
                                    <div class="segmented-control" id="motion-model-select">
                                        <input type="radio" id="model-fast" name="motion-model" value="veo-3.1-fast-generate-preview" checked />
                                        <label for="model-fast">Fast</label>
                                        <input type="radio" id="model-hq" name="motion-model" value="veo-3.1-generate-preview" />
                                        <label for="model-hq">High Quality</label>
                                    </div>
                                </div>
                                <div id="motion-prompt-output" class="hidden">
                                    <div class="control-card">
                                        <label for="motion-prompt-final-english">Final Prompt</label>
                                        <textarea id="motion-prompt-final-english" rows="4"></textarea>
                                    </div>
                                    <div class="control-card">
                                        <label>Description (Korean)</label>
                                        <div id="motion-prompt-korean" class="description-box"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="details-actions">
                                <button id="generate-motion-prompt-btn" class="primary-btn">
                                    <span class="material-symbols-outlined">animation</span>
                                    <span class="btn-text">Generate Motion Prompt</span>
                                    <div class="btn-loader"></div>
                                </button>
                                <button id="regenerate-motion-prompt-btn" class="secondary-btn hidden">
                                    <span class="material-symbols-outlined">refresh</span>
                                    <span class="btn-text">Recreate Motion Prompt</span>
                                    <div class="btn-loader"></div>
                                </button>
                                <button id="generate-video-btn" class="primary-btn hidden">
                                    <span class="material-symbols-outlined">movie</span>
                                    <span class="btn-text">Generate Video</span>
                                    <div class="btn-loader"></div>
                                </button>
                                <button id="regenerate-video-btn" class="secondary-btn hidden">
                                    <span class="material-symbols-outlined">refresh</span>
                                    <span class="btn-text">Recreate Video</span>
                                    <div class="btn-loader"></div>
                                </button>
                                <!-- Video generated state: More menu + Download -->
                                <button id="motion-more-menu-btn" class="icon-button hidden" aria-label="More actions" title="More actions">
                                    <span class="material-symbols-outlined">more_horiz</span>
                                </button>
                                <div id="motion-more-menu" class="kebab-menu hidden" style="position: absolute; left: 0; bottom: 56px; background: var(--surface-color); border: 1px solid var(--border-color); border-radius: var(--border-radius-md); box-shadow: 0 8px 24px rgba(0,0,0,0.12); width: 200px; overflow: hidden; z-index: 20;">
                                    <button id="motion-more-regenerate-prompt" class="secondary-btn" style="width: 100%; justify-content: flex-start; gap: var(--spacing-2); border: none; background: transparent;">
                                        <span class="material-symbols-outlined">refresh</span> Recreate Motion Prompt
                                    </button>
                                    <button id="motion-more-regenerate-video" class="secondary-btn" style="width: 100%; justify-content: flex-start; gap: var(--spacing-2); border: none; background: transparent;">
                                        <span class="material-symbols-outlined">refresh</span> Recreate Video
                                    </button>
                                </div>
                                <a href="#" id="download-video-btn" class="secondary-btn hidden" download style="flex: 1;">
                                    <span class="material-symbols-outlined">download</span> Download Video
                                </a>
                            </div>
                        </div>
                        <div class="details-tab-content hidden" data-tab-content="history">
                            <div id="3d-details-history-list" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 12px; padding: var(--spacing-2); overflow-y: auto;">
                                <!-- History items will be rendered here -->
                            </div>
                        </div>
                    </div>
                </div>
            </aside>
        </div>
      </div>
      
      <div id="page-image" class="page-container hidden">
        <div class="image-gen-container">
            <div class="image-gen-controls">
                <div class="controls-scroll-area">
                    <div class="control-card history-panel hidden" id="image-studio-history-panel">
                        <div class="history-header">
                            <h3>History</h3>
                            <div class="history-actions">
                                <div class="history-nav-controls">
                                    <button id="history-back-btn-image" class="icon-button" aria-label="Previous">
                                        <span class="material-symbols-outlined">arrow_back</span>
                                    </button>
                                    <span id="history-counter-image">0 / 0</span>
                                    <button id="history-forward-btn-image" class="icon-button" aria-label="Next">
                                        <span class="material-symbols-outlined">arrow_forward</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="history-list-container">
                            <ul id="history-list-image"></ul>
                            <div id="history-placeholder-image" class="hidden">
                                <p>Your generated images will appear here.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="control-card">
                        <div class="prompt-card-header">
                            <h3>Prompt</h3>
                        </div>
                        <input type="text" id="image-prompt-subject-input-image" placeholder="e.g., A cute cat wearing a wizard hat">

                        <!-- Generate Button -->
                        <button id="image-generate-btn-image" class="primary-btn">
                            <span class="material-symbols-outlined">auto_awesome</span>
                            <span class="btn-text">Generate</span>
                            <div class="btn-loader"></div>
                        </button>
                    </div>

                    <div class="control-card">
                        <div class="prompt-card-header temperature-header">
                            <h3>Temperature</h3>
                            <span id="image-temperature-label" class="temperature-value">1.0</span>
                        </div>
                        <div class="slider-group">
                            <input type="range" id="image-temperature-input-image" min="0.1" max="1" step="0.1" value="1">
                            <div class="slider-meta">
                                <span>0.1</span>
                                <span>1.0</span>
                            </div>
                        </div>
                    </div>
                    <!-- Reference Images Container -->
                    <div id="image-studio-reference-container"></div>
                    
                    <!-- Add Image Button -->
                    <div class="control-card hidden" id="add-reference-image-card">
                        <button id="add-reference-image-btn" class="secondary-btn" style="width: 100%;">
                            <span class="material-symbols-outlined">add</span>
                            <span class="btn-text">Add Reference Image</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="image-gen-results">
                <div class="result-container">
                    <div id="result-item-main-image" class="result-item" tabindex="0">
                        <div class="result-item-content">
                            <div class="result-content-header-image">
                                <div class="preview-switcher">
                                    <button class="preview-tab-item active" data-tab="image">
                                        Image
                                    </button>
                                    <button class="preview-tab-item" data-tab="motion">
                                        Motion
                                    </button>
                                </div>
                                <div class="result-actions">
                                    <button id="toggle-details-panel-btn-image" class="icon-button" aria-label="Toggle details panel">
                                        <span class="material-symbols-outlined">info</span>
                                    </button>
                                </div>
                            </div>
                            <div class="result-media-container">
                                <div id="result-idle-placeholder-image" class="result-placeholder-content">
                                    <span class="material-symbols-outlined">space_dashboard</span>
                                    <p>Your generation will appear here</p>
                                </div>
                                <div class="result-placeholder hidden">
                                    <div class="result-loading">
                                        <div class="loader"></div>
                                        <span class="loader-text">Generating...</span>
                                    </div>
                                    <div class="result-error">
                                        <span class="material-symbols-outlined">error</span>
                                        <p>Generation Failed</p>
                                        <button id="retry-generate-btn-image" class="secondary-btn">Try Again</button>
                                    </div>
                                </div>
                                <div id="motion-prompt-placeholder-image" class="result-placeholder-content hidden">
                                    <span class="material-symbols-outlined motion-placeholder-icon">movie</span>
                                    <p class="motion-placeholder-title">Ready to bring it to life?</p>
                                    <p>Generate a motion prompt to create a video from this image.</p>
                                    <button id="generate-motion-from-preview-btn-image" class="secondary-btn motion-generate-btn">
                                      <span class="material-symbols-outlined">animation</span>
                                      Generate Motion
                                    </button>
                                </div>
                                <img id="result-image-image" src="" alt="Generated image" class="result-image-image hidden">
                                <video id="result-video-image" src="" class="result-video-image hidden" controls loop autoplay muted playsinline></video>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <aside id="image-details-panel-image" class="details-panel hidden">
                <div class="details-panel-content">
                    <header class="details-panel-header">
                        <h2>Details</h2>
                        <button id="details-close-btn-image" class="icon-button" aria-label="Close details">
                            <span class="material-symbols-outlined">close</span>
                        </button>
                    </header>
                    <nav class="details-panel-tabs">
                        <button class="tab-item active" data-tab="detail">Detail</button>
                        <button class="tab-item" data-tab="motion">Motion</button>
                        <button class="tab-item" data-tab="history">History</button>
                    </nav>
                    <div class="details-panel-body">
                        <div class="details-tab-content active" data-tab-content="detail">
                            <div class="details-content-scroll">
                                <div class="details-preview">
                                    <img id="details-preview-image-image" src="" alt="Details preview">
                                </div>
                                
                                <!-- Fix the image section -->
                                <div style="display: flex; flex-direction: column; gap: var(--spacing-3);">
                                    <h3 style="font-size: 16px; font-weight: 600; margin: 0;">Fix the image</h3>
                                    <div class="details-fix-section">
                                    <div id="image-fix-content" class="options-group">
                                    <!-- Color Inputs Group -->
                                    <div style="display: flex; flex-direction: column; gap: 16px; margin-bottom: 16px;">
                                        <div style="display: grid; grid-template-columns: 80px 1fr; gap: var(--spacing-3); align-items: center;">
                                            <label style="font-size: 14px; font-weight: 500;">BG Color</label>
                                            <div class="input-with-suffix color-input">
                                              <div class="input-swatch">
                                                <input type="color" id="details-background-color-picker-image" value="#FFFFFF" class="color-swatch-input" />
                                              </div>
                                              <span class="color-value">#FFFFFF</span>
                                            </div>
                                        </div>
                                        
                                        <div style="display: grid; grid-template-columns: 80px 1fr; gap: var(--spacing-3); align-items: center;">
                                            <label style="font-size: 14px; font-weight: 500;">Main Color</label>
                                            <div class="input-with-suffix color-input">
                                              <div class="input-swatch">
                                                <input type="color" id="details-object-color-picker-image" value="#2962FF" class="color-swatch-input" />
                                              </div>
                                              <span class="color-value">#2962FF</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Action Buttons - Vertical Layout -->
                                    <div style="display: flex; flex-direction: column; gap: var(--spacing-2);">
                                        <button id="details-zoom-out-1-5x-btn-image" class="secondary-btn" style="width: 100%;">
                                            <span class="material-symbols-outlined">zoom_out</span>
                                            <span class="btn-text">Zoom Out 2x</span>
                                            <div class="btn-loader"></div>
                                        </button>
                                        <button id="details-fix-btn-image" class="primary-btn" style="width: 100%;" disabled>
                                            <span class="material-symbols-outlined">autorenew</span>
                                            <span class="btn-text">Recreate</span>
                                            <div class="btn-loader"></div>
                                        </button>
                                    </div>
                                    </div>
                                </div>
                            </div>
                            </div>
                            
                            <div class="details-actions">
                                <button id="details-more-menu-btn-image" class="icon-button" aria-label="More actions" title="More actions">
                                    <span class="material-symbols-outlined">more_horiz</span>
                                </button>
                                <!-- More menu dropdown -->
                                <div id="details-more-menu-image" class="kebab-menu hidden" style="position: absolute; left: 0; bottom: 56px; background: var(--surface-color); border: 1px solid var(--border-color); border-radius: var(--border-radius-md); box-shadow: 0 8px 24px rgba(0,0,0,0.12); width: 200px; overflow: hidden; z-index: 20;">
                                    <button id="details-more-upscale-image" class="secondary-btn" style="width: 100%; justify-content: flex-start; gap: var(--spacing-2); border: none; background: transparent;">
                                        <span class="material-symbols-outlined">photo_size_select_actual</span> Upscale
                                    </button>
                                    <button id="details-more-delete-image" class="secondary-btn danger" style="width: 100%; justify-content: flex-start; gap: var(--spacing-2); border: none; background: transparent;">
                                        <span class="material-symbols-outlined">delete</span> Delete
                                    </button>
                                </div>
                                <a href="#" id="details-download-btn-image" class="secondary-btn" download style="flex: 1;">
                                    <span class="material-symbols-outlined">download</span>
                                    <span class="btn-text">Download</span>
                                </a>
                            </div>
                        </div>
                        
                        <!-- History Tab Content -->
                        <div class="details-tab-content hidden" data-tab-content="history">
                            <div id="image-details-history-list" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 12px; padding: var(--spacing-2); overflow-y: auto;">
                                <!-- History items will be rendered here -->
                            </div>
                        </div>
                        
                        <div class="details-tab-content hidden" data-tab-content="motion">
                            <div class="motion-fixed-header">
                                <div class="motion-thumbnail-container">
                                    <img id="motion-thumbnail-image-image" src="" alt="Motion thumbnail">
                                    <div class="motion-thumbnail-info">
                                        <span id="motion-thumbnail-label-image"></span>
                                        <span class="motion-thumbnail-desc">Ready for animation</span>
                                    </div>
                                </div>
                            </div>
                            <div class="motion-scroll-content">
                                <div class="video-result-container hidden" id="motion-video-container-image">
                                    <video id="motion-video-player-image" controls loop autoplay muted playsinline></video>
                                    <div id="motion-video-loader-image" class="result-loading hidden">
                                        <div class="loader"></div>
                                        <span id="motion-gen-status-text-image" class="loader-text">Generating video...</span>
                                    </div>
                                </div>
                                <div id="motion-reference-image-container-image" class="reference-image-container">
                                    <div class="image-drop-zone reference-drop-zone" data-index="0">
                                        <span class="slot-title">First Frame</span>
                                        <div class="drop-zone-prompt"><p style="font-size:12px">Drop or click</p></div>
                                        <img class="style-image-preview hidden" alt="First frame reference image">
                                        <button class="remove-style-image-btn icon-button hidden" aria-label="Remove First Frame"><span class="material-symbols-outlined">delete</span></button>
                                    </div>
                                    <div class="image-drop-zone reference-drop-zone" data-index="1">
                                        <span class="slot-title">Last Frame</span>
                                        <div class="drop-zone-prompt"><p style="font-size:12px">Drop or click</p></div>
                                        <img class="style-image-preview hidden" alt="Last frame reference image">
                                        <button class="remove-style-image-btn icon-button hidden" aria-label="Remove Last Frame"><span class="material-symbols-outlined">delete</span></button>
                                    </div>
                                </div>
                                <input type="file" id="motion-reference-image-input-image" class="hidden" accept="image/*">
                                <div class="control-card" style="padding: 0;">
                                    <h3>Generation Speed</h3>
                                    <div class="segmented-control" id="motion-model-select-image">
                                        <input type="radio" id="model-fast-image" name="motion-model-image" value="veo-3.1-fast-generate-preview" checked />
                                        <label for="model-fast-image">Fast</label>
                                        <input type="radio" id="model-hq-image" name="motion-model-image" value="veo-3.1-generate-preview" />
                                        <label for="model-hq-image">High Quality</label>
                                    </div>
                                </div>
                                <div id="motion-prompt-output-image" class="hidden">
                                    <div class="control-card">
                                        <label for="motion-prompt-final-english-image">Final Prompt</label>
                                        <textarea id="motion-prompt-final-english-image" rows="4"></textarea>
                                    </div>
                                    <div class="control-card">
                                        <label>Description (Korean)</label>
                                        <div id="motion-prompt-korean-image" class="description-box"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="details-actions">
                                <button id="generate-motion-prompt-btn-image" class="primary-btn">
                                    <span class="material-symbols-outlined">animation</span>
                                    <span class="btn-text">Generate Motion Prompt</span>
                                    <div class="btn-loader"></div>
                                </button>
                                <button id="regenerate-motion-prompt-btn-image" class="secondary-btn hidden">
                                    <span class="material-symbols-outlined">refresh</span>
                                    <span class="btn-text">Recreate Prompt</span>
                                    <div class="btn-loader"></div>
                                </button>
                                <button id="generate-video-btn-image" class="primary-btn hidden">
                                    <span class="material-symbols-outlined">movie</span>
                                    <span class="btn-text">Generate Video</span>
                                    <div class="btn-loader"></div>
                                </button>
                                <button id="regenerate-video-btn-image" class="secondary-btn hidden">
                                    <span class="material-symbols-outlined">refresh</span>
                                    <span class="btn-text">Recreate Video</span>
                                    <div class="btn-loader"></div>
                                </button>
                                <button id="motion-more-menu-btn-image" class="icon-button hidden" aria-label="More actions" title="More actions">
                                    <span class="material-symbols-outlined">more_horiz</span>
                                </button>
                                <div id="motion-more-menu-image" class="kebab-menu hidden" style="position: absolute; left: 0; bottom: 56px; background: var(--surface-color); border: 1px solid var(--border-color); border-radius: var(--border-radius-md); box-shadow: 0 8px 24px rgba(0,0,0,0.12); width: 200px; overflow: hidden; z-index: 20;">
                                    <button id="motion-more-regenerate-prompt-image" class="secondary-btn" style="width: 100%; justify-content: flex-start; gap: var(--spacing-2); border: none; background: transparent;">
                                        <span class="material-symbols-outlined">refresh</span> Recreate Motion Prompt
                                    </button>
                                    <button id="motion-more-regenerate-video-image" class="secondary-btn" style="width: 100%; justify-content: flex-start; gap: var(--spacing-2); border: none; background: transparent;">
                                        <span class="material-symbols-outlined">refresh</span> Recreate Video
                                    </button>
                                </div>
                                <a href="#" id="download-video-btn-image" class="secondary-btn hidden" download>
                                    <span class="material-symbols-outlined">download</span> Download Video
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>
        </div>
      </div>
      
      <!-- Image Modal -->
      <div id="image-modal" class="image-modal-overlay hidden">
        <div class="image-modal-content">
            <button id="image-modal-close-btn" class="icon-button" aria-label="Close image view">
                <span class="material-symbols-outlined">close</span>
            </button>
            <img id="image-modal-view" src="" alt="Enlarged 3D icon">
            <div class="image-modal-actions">
                <button id="image-modal-regenerate-btn" class="secondary-btn">
                    <span class="material-symbols-outlined">refresh</span> Recreate
                </button>
                <a href="#" id="image-modal-download-btn" class="secondary-btn" download>
                    <span class="material-symbols-outlined">download</span> Download
                </a>
            </div>
        </div>
      </div>
      
      <!-- Motion Category Modal -->
      <div id="motion-category-modal" class="image-modal-overlay hidden">
        <div class="image-modal-content">
            <header class="modal-header">
                <h2 class="modal-title">ëª¨ì…˜ ìŠ¤íƒ€ì¼ ì„ íƒ</h2>
                <button id="motion-category-close-btn" class="icon-button" aria-label="ëª¨ì…˜ ìŠ¤íƒ€ì¼ ì„ íƒ ë‹«ê¸°">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </header>
            <div id="motion-category-list"></div>
        </div>
      </div>

      <!-- 3D Image Generation Loader Modal -->
      <div id="image-generation-loader-modal" class="image-modal-overlay hidden">
        <div class="image-modal-content" style="max-width: 420px; text-align: center;">
          <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; gap: var(--spacing-4); padding: var(--spacing-5);">
              <div class="loader"></div>
              <p style="color: var(--text-secondary);">Generating your 3D image...</p>
          </div>
        </div>
      </div>
      
      <!-- Main Page Generation Loader Modal -->
      <div id="main-generation-loader-modal" class="image-modal-overlay hidden">
        <div class="image-modal-content" style="max-width: 420px; text-align: center;">
          <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; gap: var(--spacing-4); padding: var(--spacing-5);">
              <div class="loader"></div>
              <p style="color: var(--text-secondary);">Generating your 3D image...</p>
          </div>
        </div>
      </div>
      
      <!-- Image Studio Text Generation Modal -->
      <div id="image-studio-text-modal" class="image-modal-overlay hidden">
        <div class="image-modal-content" style="width: 800px; height: 600px; max-width: 800px; max-height: 600px; padding: var(--spacing-6); background-color: var(--surface-color); border-radius: var(--border-radius-lg); display: flex; flex-direction: column;">
          <header class="image-studio-modal-header">
            <h3 style="font-size: 18px; font-weight: 700; color: var(--text-primary);">ì´ë¯¸ì§€ ìƒì„±</h3>
            <button id="image-studio-text-modal-close-btn" class="icon-button" aria-label="Close">
              <span class="material-symbols-outlined">close</span>
            </button>
          </header>
          <textarea id="image-studio-text-input" placeholder="ì´ë¯¸ì§€ ìƒì„± í”„ë¡¬í”„íŠ¸ë¥¼ ìž…ë ¥í•˜ì„¸ìš”..." style="flex: 1; width: 100%; padding: var(--spacing-3); margin-bottom: var(--spacing-4); border-radius: var(--border-radius-md); border: 1px solid var(--border-color); font-family: var(--font-family); resize: none; background-color: var(--bg-color); color: var(--text-primary); font-size: 14px; min-height: 0;"></textarea>
          <div style="display: flex; justify-content: flex-end; gap: var(--spacing-2);">
            <button id="image-studio-text-cancel-btn" class="secondary-btn">ì·¨ì†Œ</button>
            <button id="image-studio-text-generate-btn" class="primary-btn">ìƒì„±</button>
          </div>
        </div>
      </div>
      
      <!-- Video Generation Loader Modal -->
      <div id="video-generation-loader-modal" class="image-modal-overlay hidden">
        <div class="image-modal-content" style="max-width: 420px; text-align: center;">
            <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; gap: var(--spacing-4); padding: var(--spacing-5);">
                <div class="loader"></div>
                <h3 style="font-size: 18px; font-weight: 700; color: var(--text-primary);">Generating your video...</h3>
                <p id="video-loader-message" style="color: var(--text-secondary); min-height: 40px;"></p>
                <p style="font-size: 12px; color: var(--text-secondary); opacity: 0.8;">This may take a few minutes. Please don't close this window.</p>
            </div>
        </div>
      </div>
      
      <!-- 2D Studio Loader Modal -->
      <div id="p2d-loader-modal" class="image-modal-overlay hidden">
        <div class="image-modal-content" style="max-width: 420px; text-align: center;">
            <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; gap: var(--spacing-4); padding: var(--spacing-5);">
                <div class="loader"></div>
                <p id="p2d-loader-message" style="color: var(--text-secondary);">Processing...</p>
            </div>
        </div>
      </div>
      
      <!-- 2D Studio: SVG Preview Modal -->
      <div id="p2d-svg-preview-modal" class="image-modal-overlay hidden">
        <div class="image-modal-content" style="width: 800px; max-height: 90vh; padding: var(--spacing-5);">
            <header class="image-studio-modal-header">
                <h3>SVG Preview</h3>
                <button id="p2d-svg-preview-close-btn" class="icon-button" aria-label="Close">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </header>
            
            <!-- Tabs -->
            <div class="details-panel-tabs">
                <button class="tab-item active" data-tab="preview">Preview</button>
                <button class="tab-item" data-tab="code">Code</button>
            </div>
            
            <!-- Tab Content -->
            <div class="svg-tabs-body">
                <!-- Preview Tab -->
                <div class="details-tab-content" data-tab-content="preview">
                    <div class="svg-tab-content">
                        <div id="p2d-svg-preview-container" class="svg-preview-area">
                            <label class="checkerboard-toggle svg-checkerboard-toggle" id="p2d-svg-preview-toggle">
                                <input type="checkbox" id="p2d-svg-bg-toggle" checked>
                                <span>Checkerboard</span>
                            </label>
                            <div id="p2d-svg-preview-content"></div>
                        </div>
                        <div class="svg-modal-actions">
                            <button id="p2d-download-svg-btn-preview" class="secondary-btn">
                                <span class="material-symbols-outlined">download</span> Download .svg
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Code Tab -->
                <div class="details-tab-content hidden" data-tab-content="code">
                    <div class="svg-tab-content">
                        <textarea id="p2d-svg-code-view" class="svg-code-textarea" readonly></textarea>
                        <div class="svg-modal-actions">
                            <button id="p2d-copy-svg-code-btn" class="secondary-btn">
                                <span class="material-symbols-outlined">content_copy</span> Copy SVG
                            </button>
                            <button id="p2d-download-svg-btn" class="secondary-btn">
                                <span class="material-symbols-outlined">download</span> Download .svg
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
      </div>
      
      <!-- 2D Studio: Compare Modal -->
      <!-- 3D Studio Compare Modal -->
      <div id="compare-modal-3d" class="image-modal-overlay hidden">
        <div class="image-modal-content" style="width: 900px; max-height: 90vh; padding: var(--spacing-5);">
            <header class="image-studio-modal-header">
                <h3>Compare Images</h3>
                <button id="compare-close-btn-3d" class="icon-button" aria-label="Close">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </header>
            <div style="position: relative; margin-top: var(--spacing-4); background: #f5f5f5; border-radius: var(--border-radius-md); overflow: hidden;">
                <div style="position: relative; width: 100%; height: 500px;">
                    <!-- Original image as base layer -->
                    <div style="position: absolute; inset: 0; z-index: 1;">
                        <label style="position: absolute; top: var(--spacing-2); left: var(--spacing-2); background: rgba(0,0,0,0.6); color: white; padding: var(--spacing-1) var(--spacing-2); border-radius: var(--border-radius-sm); font-size: 12px; z-index: 2;">Original</label>
                        <img id="compare-original-3d" src="" alt="Original" style="width: 100%; height: 100%; object-fit: contain; display: block;">
                    </div>
                    <!-- Current image clipped by divider -->
                    <div style="position: absolute; inset: 0; z-index: 2; overflow: hidden;">
                        <label style="position: absolute; top: var(--spacing-2); right: var(--spacing-2); background: rgba(0,0,0,0.6); color: white; padding: var(--spacing-1) var(--spacing-2); border-radius: var(--border-radius-sm); font-size: 12px; z-index: 3;">Current</label>
                        <img id="compare-current-3d" src="" alt="Current" style="width: 100%; height: 100%; object-fit: contain; display: block;">
                    </div>
                    <!-- Draggable divider -->
                    <div id="compare-divider-3d" style="position: absolute; top: 0; bottom: 0; left: 50%; width: 3px; background: #0070F3; cursor: ew-resize; z-index: 4; box-shadow: 0 0 8px rgba(0,112,243,0.5);">
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 32px; height: 32px; background: #0070F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">
                            <span class="material-symbols-outlined" style="font-size: 18px; color: white;">drag_indicator</span>
                        </div>
                    </div>
                    <!-- Invisible slider for drag handle -->
                    <input type="range" id="compare-slider-3d" min="0" max="100" value="50" style="position: absolute; top: 50%; left: 0; right: 0; width: 100%; z-index: 5; opacity: 0; cursor: ew-resize; transform: translateY(-50%);">
                </div>
            </div>
            <button id="compare-modal-close-btn-3d" class="secondary-btn" style="margin-top: var(--spacing-4); width: 100%;">Close</button>
        </div>
      </div>
      
      <div id="p2d-compare-modal" class="image-modal-overlay hidden">
        <div class="image-modal-content" style="width: 900px; max-height: 90vh; padding: var(--spacing-5);">
            <header class="image-studio-modal-header">
                <h3>Compare Images</h3>
                <button id="p2d-compare-close-btn" class="icon-button" aria-label="Close">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </header>
            <div style="position: relative; margin-top: var(--spacing-4); background: #f5f5f5; border-radius: var(--border-radius-md); overflow: hidden;">
                <div style="position: relative; width: 100%; height: 500px;">
                    <!-- Original image as base layer -->
                    <div style="position: absolute; inset: 0; z-index: 1;">
                        <label style="position: absolute; top: var(--spacing-2); left: var(--spacing-2); background: rgba(0,0,0,0.6); color: white; padding: var(--spacing-1) var(--spacing-2); border-radius: var(--border-radius-sm); font-size: 12px; z-index: 2;">Original</label>
                        <img id="p2d-compare-original" src="" alt="Original" style="width: 100%; height: 100%; object-fit: contain; display: block;">
                    </div>
                    <!-- Current image clipped by divider -->
                    <div style="position: absolute; inset: 0; z-index: 2; overflow: hidden;">
                        <label style="position: absolute; top: var(--spacing-2); right: var(--spacing-2); background: rgba(0,0,0,0.6); color: white; padding: var(--spacing-1) var(--spacing-2); border-radius: var(--border-radius-sm); font-size: 12px; z-index: 3;">Current</label>
                        <img id="p2d-compare-current" src="" alt="Current" style="width: 100%; height: 100%; object-fit: contain; display: block;">
                    </div>
                    <!-- Draggable divider -->
                    <div id="p2d-compare-divider" style="position: absolute; top: 0; bottom: 0; left: 50%; width: 3px; background: #0070F3; cursor: ew-resize; z-index: 4; box-shadow: 0 0 8px rgba(0,112,243,0.5);">
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 32px; height: 32px; background: #0070F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">
                            <span class="material-symbols-outlined" style="font-size: 18px; color: white;">drag_indicator</span>
                        </div>
                    </div>
                    <!-- Invisible slider for drag handle -->
                    <input type="range" id="p2d-compare-slider" min="0" max="100" value="50" style="position: absolute; top: 50%; left: 0; right: 0; width: 100%; z-index: 5; opacity: 0; cursor: ew-resize; transform: translateY(-50%);">
                </div>
            </div>
            <button id="p2d-compare-modal-close-btn" class="secondary-btn" style="margin-top: var(--spacing-4); width: 100%;">Close</button>
        </div>
      </div>
      
      <!-- Upload Choice Modal -->
      <div id="upload-choice-modal" class="image-modal-overlay hidden">
        <div class="image-modal-content">
          <header class="modal-header">
              <h2 class="modal-title">Upload Content</h2>
              <button id="upload-choice-close-btn" class="icon-button" aria-label="Close upload options">
                  <span class="material-symbols-outlined">close</span>
              </button>
          </header>
          <div id="upload-options" style="padding-top: 16px; display:flex; flex-direction:column; gap:12px;">
            <button id="upload-from-device-btn" class="secondary-btn" style="width:100%"><span class="material-symbols-outlined">upload_file</span>Upload from device</button>
            <button id="upload-from-url-btn" class="secondary-btn" style="width:100%"><span class="material-symbols-outlined">link</span>Upload from URL</button>
          </div>
          <form id="url-upload-form" class="hidden" style="display:flex; flex-direction:column; gap:16px; padding-top:16px;">
            <input type="url" id="url-upload-input" class="rename-input" placeholder="Enter image or video URL">
            <div class="rename-actions">
                <button type="button" id="url-upload-cancel-btn" class="secondary-btn">Cancel</button>
                <button type="submit" class="primary-btn">Upload</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Rename Modal -->
      <div id="rename-modal-overlay" class="image-modal-overlay hidden">
        <div class="image-modal-content">
            <form id="rename-modal-form">
                <h3>Rename File</h3>
                <input type="text" id="rename-modal-input" class="rename-input" required>
                <div class="rename-actions">
                    <button type="button" id="rename-modal-cancel" class="secondary-btn">Cancel</button>
                    <button type="submit" class="primary-btn">Save</button>
                </div>
            </form>
        </div>
      </div>
      
      <div id="sr-announcer" class="sr-only" aria-live="polite"></div>
    </div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>